cmake_minimum_required(VERSION 3.16)
project(SFMLApp CXX)
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(SFML_ROOT "${CMAKE_SOURCE_DIR}/lib/SFML-3.0.0")  # adjust if different
set(SFML_INCLUDE_DIR "${SFML_ROOT}/include")
set(SFML_LIB_DIR     "${SFML_ROOT}/lib")

add_executable(main src/main.cpp)
# Copy /assets to the executable folder after build
set(ASSETS_DIR "${CMAKE_SOURCE_DIR}/assets")
add_custom_command(TARGET main POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E make_directory "$<TARGET_FILE_DIR:main>/assets"
  COMMAND ${CMAKE_COMMAND} -E copy_directory "${ASSETS_DIR}" "$<TARGET_FILE_DIR:main>/assets"
)


target_include_directories(main PRIVATE "${SFML_INCLUDE_DIR}")
target_link_directories(main PRIVATE "${SFML_LIB_DIR}")
target_link_libraries(main PRIVATE
  sfml-graphics sfml-window sfml-system sfml-audio
)

# Let the app find the .dylibs at runtime
if(APPLE)
  set_target_properties(main PROPERTIES
    BUILD_RPATH   "${SFML_LIB_DIR}"
    INSTALL_RPATH "${SFML_LIB_DIR}"
  )
endif()
